- Refactor file handling
- Add the error/warning number to output, also refactor error reporting a little bit
